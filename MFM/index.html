<!doctype html>
<html>
<head>
	<!-- Icons from Font Awesome -->
  <!-- Font Awesome CSS -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><!--this is new-->
	<link rel="stylesheet" href="leaflet_awesome_markers.css"><!--this is new-->
  <!-- Leaflet -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />
	<!--[if lte IE 8]>
     <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.ie.css" />
 	<![endif]-->

	<script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>
	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>

	<link rel="points" type="application/json" href="./kemper.json">


	<style type="text/css">
		body {
			padding: 0;
			margin: 0;
		}
		html, body, #murder-map {
			height: 100%;
		}


	/*
* These CSS rules affect the tooltips within maps with the custom-popup
* class. See the full CSS for all customizable options:
* https://github.com/mapbox/mapbox.js/blob/001754177f3985c0e6b4a26e3c869b0c66162c99/theme/style.css#L321-L366
*/
.custom-popup .leaflet-popup-content-wrapper {
background:#2a2a2a;
color:#fff;
font-size:16px;
line-height:24px;
border-radius: 3px;
}
.custom-popup .leaflet-popup-content-wrapper a {
color:rgba(255,255,255,0.5);
}
.custom-popup .leaflet-popup-tip {
    background: #2a2a2a;
}

	</style>
	</head>

<body>
	<div class='custom-popup' id="murder-map"></div>
	<script>
	var OpenStreetMap_Mapnik = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	maxZoom: 19,
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	});


  var smallIcon = new L.Icon({
      iconSize: [20,20],
      iconAnchor: [10,10],
      popupAnchor:  [0,-5],
      iconUrl: './circle-11.svg'
  });



	$.getJSON($('link[rel="points"]').attr("href"), function(data) {
		var geojson = L.geoJson(data, {
			pointToLayer: function (feature, latlng) {
						return L.marker(latlng, {
							icon: smallIcon
						}).on('mouseover', function() {//this is new
                    this.bindPopup("<strong>Episode: </strong>" + feature.properties.Episode
								 									 +"<br>" + "<strong>Perpetrator: </strong>" + feature.properties.Perpetrator
								 									 +"<br>" + "<strong>Victim(s): </strong>" + feature.properties.Victim
								 									 +"<br>" + "<strong>Date: </strong>" + feature.properties.Date).openPopup();
                });
            }
        });


		var map = L.map('murder-map').fitBounds(geojson.getBounds());
		OpenStreetMap_Mapnik.addTo(map);
		geojson.addTo(map);
	});
	</script>
</body>
</html>
